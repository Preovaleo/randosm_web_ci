function changeType(){"Autre :"==document.getElementById("type").value&&(textField=document.createElement("input"),textField.setAttribute("type","text"),textField.setAttribute("name","otherType"),textField.setAttribute("id","otherType"),document.getElementById("form-step-2").insertBefore(textField,document.getElementById("type").nextSibling)),"Autre :"!=$("#type").val()&&document.getElementById("otherType")&&document.getElementById("otherType").parentNode.removeChild(document.getElementById("otherType"))}function getPseudo(){return form?document.forms["create-hike-form"].elements.name.value:void 0}function getCity(){return form?document.forms["create-hike-form"].elements.city.value:void 0}function getDistance(){return form?document.getElementById("length").value:void 0}function getTime(){return form?document.getElementById("time").value:void 0}function getDescription(){return form?document.forms["create-hike-form"].elements.description.value:void 0}function getType(){return form&&(typeList=document.getElementById("type")),typeList.options[typeList.selectedIndex].innerHTML}function getDifficulty(){if(form)for(var inputs=document.getElementsByTagName("input"),i=0;i<inputs.length;i++)if("radio"==inputs[i].type&&inputs[i].checked)return inputs[i].value}function checkCity(){if(getCity()){var res=getCity().split(" ");return $.ajax({url:base_url+"my_hikes/checkCity",data:{cityField:res[0]},type:"POST",success:function(data){"true"==data&&""!==$("input[name=name]").val()?$(".step2").removeClass("disabled-button"):$(".step2").addClass("disabled-button")}})}}function setDropzonesUrl(hikeId){photoDropzone.options.url+=hikeId,audioDropzone.options.url+=hikeId,videoDropzone.options.url+=hikeId}function upload(){0!==photoDropzone.getQueuedFiles().length?(photoDropzone.processQueue(),console.log("------ Photos uploading ------")):0!==audioDropzone.getQueuedFiles().length?(audioDropzone.processQueue(),console.log("------ Audios uploading ------")):0!==videoDropzone.getQueuedFiles().length?(videoDropzone.processQueue(),console.log("------ Videos uploading ------")):document.location=base_url+"my_hikes"}function thumbnails(file,dropzone){file.type.match(/audio.*/)&&dropzone.emit("thumbnail",file,base_url+"assets/images/audio.png"),file.type.match(/video.*/)&&dropzone.emit("thumbnail",file,base_url+"assets/images/video.png")}function AnimateRotate(deg,element){$({deg:0}).animate({deg:deg},{step:function(now){element.css({transform:"rotate("+now+"deg)"})}})}var form=document.forms["create-hike-form"];if($(document).ready(function(){checkCity()}),$("input[name=name]").on("keyup change",function(){checkCity()}),$("input[name=city]").on("keyup change",function(){checkCity()}),$(document.body).on("click",".ui-corner-all",function(){checkCity()}),$("a.button.step1").click(function(){$("div#step2").hide(),$("div#step1").show(),$("div#step1").show()}),$("a.button.step2").click(function(){getPseudo()||document.getElementById("nameError")||(error=document.createElement("p"),error.setAttribute("class","error"),error.setAttribute("id","nameError"),document.getElementById("step1").getElementsByClassName("errors")[0].appendChild(error),error.appendChild(document.createTextNode('Le champs "Nom" doit être renseigné.'))),getCity()||document.getElementById("cityError")||(error=document.createElement("p"),error.setAttribute("class","error"),error.setAttribute("id","cityError"),document.getElementById("step1").getElementsByClassName("errors")[0].appendChild(error),error.appendChild(document.createTextNode('Le champs "Ville associée" doit être renseigné.'))),getPseudo()&&document.getElementById("nameError")&&document.getElementById("nameError").parentNode.removeChild(document.getElementById("nameError")),getCity()&&document.getElementById("cityError")&&document.getElementById("cityError").parentNode.removeChild(document.getElementById("cityError")),getPseudo()&&getCity()&&(document.getElementById("nameError")&&document.getElementById("nameError").parentNode.removeChild(document.getElementById("nameError")),document.getElementById("cityError")&&document.getElementById("cityError").parentNode.removeChild(document.getElementById("cityError")),$("div#step1").hide(),$("div#step3").hide(),$("div#step2").show())}),$("a.button.step3").click(function(){$("div#step3").css({left:"0"}),$("div#step2").hide(),$("div#step4").hide(),$("div#step3").show()}),$("a.button.step4").click(function(){$("div.content").width()==$("div.wraper").width()?($("div#step5").hide(),setTimeout(function(){$("div#step3").hide(),$("div#step4").show()},900)):($("div#step5").hide(),$("div#step3").hide(),$("div#step4").show())}),$("a.button.step5").click(function(){getDistance()&&0!==getDistance()||document.getElementById("distanceError")||(error=document.createElement("p"),error.setAttribute("class","error"),error.setAttribute("id","distanceError"),document.getElementById("step4").getElementsByClassName("errors")[0].appendChild(error),error.appendChild(document.createTextNode('Le champs "Distance" doit être renseigné.'))),(""===getTime()||"00:00"==getTime())&&(document.getElementById("timeError")||(error=document.createElement("p"),error.setAttribute("class","error"),error.setAttribute("id","timeError"),document.getElementById("step4").getElementsByClassName("errors")[0].appendChild(error),error.appendChild(document.createTextNode('Le champs "Durée" doit être renseigné.')))),getDistance()&&0!==getDistance()&&document.getElementById("distanceError")&&document.getElementById("distanceError").parentNode.removeChild(document.getElementById("distanceError")),getTime()&&document.getElementById("timeError")&&document.getElementById("timeError").parentNode.removeChild(document.getElementById("timeError")),getDistance()&&0!==getDistance()&&getTime()&&(document.getElementById("distanceError")&&document.getElementById("distanceError").parentNode.removeChild(document.getElementById("distanceError")),document.getElementById("timeError")&&document.getElementById("timeError").parentNode.removeChild(document.getElementById("timeError")),$("div#step4").hide(),$("div#step6").hide(),$("div#step5").show())}),$("a.button.step6").click(function(){$("div#step5").hide(),$("div#step6").show()}),"undefined"!=typeof Dropzone){Dropzone.autoDiscover=!1,Dropzone.prototype.dictDefaultMessage="Faire glisser ici les fichiers à télécharger.",Dropzone.prototype.defaultOptions.dictFallbackMessage="Votre navigateur ne supporte pas le téléchargement pas glisser-déposer.",Dropzone.prototype.defaultOptions.dictFallbackText="Utilisez s'il-vous-plait le formulaire ci-dessous pour télécharger vos fichiers.",Dropzone.prototype.defaultOptions.dictFileTooBig="Fichier trop lourd ({{filesize}} Mio). Taille max : {{maxFilesize}} Mio.",Dropzone.prototype.defaultOptions.dictInvalidFileType="Vous ne pouvez pas télécharger de fichiers de ce type ici.",Dropzone.prototype.defaultOptions.dictResponseError="Le serveur a répondu avec le code {{statusCode}}.",Dropzone.prototype.defaultOptions.dictCancelUpload="Annuler le téléchargement",Dropzone.prototype.defaultOptions.dictCancelUploadConfirmation="Êtes-vous sûr de vouloir annuler le téléchargement ?",Dropzone.prototype.defaultOptions.dictRemoveFile="Supprimer",Dropzone.prototype.defaultOptions.dictMaxFilesExceeded="Vous ne pouvez plus ajouter de fichier.",Dropzone.prototype.defaultOptions.autoProcessQueue=!1,Dropzone.prototype.defaultOptions.parallelUploads=9,Dropzone.prototype.defaultOptions.addRemoveLinks=!0,Dropzone.prototype.defaultOptions.uploadMultiple=!0;var photoDropzone=new Dropzone("div#photo-dropzone",{url:base_url+"create_hike/file_upload/photo/",acceptedFiles:".jpg, .jpeg, .png",maxFiles:3,maxFilesize:2,init:function(){this.on("addedfile",function(file){thumbnails(file,this)}),this.on("complete",function(){0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(console.log("Tout les fichiers photos ont été uploadés."),0!==audioDropzone.getQueuedFiles().length?audioDropzone.processQueue():0!==videoDropzone.getQueuedFiles().length?videoDropzone.processQueue():document.location=base_url+"my_hikes")})}}),audioDropzone=new Dropzone("div#audio-dropzone",{url:base_url+"create_hike/file_upload/audio/",acceptedFiles:"audio/*",maxFiles:3,maxFilesize:1,init:function(){this.on("addedfile",function(file){thumbnails(file,this)}),this.on("complete",function(){0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(console.log("Tout les fichiers audios ont été uploadés."),0!==videoDropzone.getQueuedFiles().length?videoDropzone.processQueue():document.location=base_url+"my_hikes")})}}),videoDropzone=new Dropzone("div#video-dropzone",{url:base_url+"create_hike/file_upload/video/",acceptedFiles:"video/*",maxFiles:3,maxFilesize:10,init:function(){this.on("addedfile",function(file){thumbnails(file,this)}),this.on("complete",function(){0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(console.log("Tout les fichiers vidéos ont été uploadés."),document.location=base_url+"my_hikes")})}})}$("#step6 h1").on("click",function(){var h1=$(this);"none"==h1.next().css("display")?(AnimateRotate(0,h1.children()),h1.animate({"margin-bottom":"180px"},600,function(){h1.next().fadeIn(800),h1.animate({"margin-bottom":"0"},200)})):(AnimateRotate(90,h1.children()),h1.next().fadeOut(400,function(){}),h1.animate({"margin-bottom":"180px"},0))});